<dom-module id="quick-pick-list">
    <link rel="import" href="../common-control/drop-down.html">
    <link rel="import" href="../common-control/selectable-button.html">
    <link rel="import" type="css" href="css/quick-pick.css">

    <template>
        <drop-down is-active="[[isOpen]]">
            <input class="quick-pick-search" value="{{searchString::input}}">
            <template is="dom-repeat" items="[[listItems]]"
                filter="[[computeFilter(searchString)]]">
                <selectable-button button-value="[[item]]"></selectable-button>
            </template>
        </drop-down>
    </template>

    <script>
    Polymer({
        is: 'quick-pick-list',
        properties: {
            listItems: {
                type: Array,
                value: []
            },
            isOpen: {
                type: Boolean,
                value: false,
            },
            filterString:{
                type: String,
                value: ''
            }
        },

        listeners: {
            'button-select': 'closeList',
            'button-deselect': 'closeList'
        },

        closeList: function(event){
            this.fire('quick-pick-close', event.detail);
        },

        computeFilter: function(string) {
            if (!string) {
                return null;
            } else {
                string = string.toLowerCase();
                return function(item) {
                    var title = item.title.toLowerCase();
                    return (title.indexOf(string) != -1);
                };
            }
        }
    });
    </script>
</dom-module>
