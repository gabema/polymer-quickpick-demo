

<dom-module id="quick-pick-list">
    <link rel="import" href="../common-control/drop-down.html">
    <link rel="import" href="quick-pick-row.html">
    <link rel="import" type="css" href="css/quick-pick.css">

    <template>
      <drop-down is-active="{{isOpen}}">
          <input class="quick-pick-search" value="{{searchString::input}}">
          <template is="dom-repeat" items="{{listItems}}"
              filter="{{computeFilter(searchString)}}">
              <quick-pick-row on-click="valueChange" class="quick-pick-button">{{item}}</quick-pick-row>
          </template>
      </drop-down>
    </template>

  <script>
    Polymer({
      is: 'quick-pick-list',
      properties: {
        listItems: {
            type: Array,
            value: []
        },
        isOpen: {
            type: Boolean,
            value: false
        },
        filterString:{
            type: String,
            value: ''
        },
        quickPickValue: {
            type: String,
            value: '',
            notify: true
        }
      },

      computeFilter: function(string) {
          if (!string) {
              return null;
          } else {
              string = string.toLowerCase();
              return function(item) {
                  var lowerItem = item.toLowerCase();
                  return (lowerItem.indexOf(string) != -1);
              };
          }
      },

      valueChange: function(event){
          this.quickPickValue = event.model.item;
      }
    });
  </script>
</dom-module>
